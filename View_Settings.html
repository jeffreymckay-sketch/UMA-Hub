<!-- 7. GLOBAL SETTINGS (CONSOLIDATED) -->
<div id="page-settings" class="page">
  <h1>Global Settings</h1>
  <div class="tab-nav">
      <div id="settings-tab-general" class="tab-nav-item active">General & Access</div>
      <div id="settings-tab-staff" class="tab-nav-item">Staff Management</div>
      <div id="settings-tab-scheduling" class="tab-nav-item">Scheduling Config</div>
      <div id="settings-tab-proctoring" class="tab-nav-item">Proctoring Config</div>
      <div id="settings-tab-reporting" class="tab-nav-item">Reporting & Data</div>
  </div>

  <!-- 1. GENERAL & ACCESS -->
  <div id="tab-set-general" class="tab-page active">
      <h3>Database Connection</h3>
      <p class="setting-description">Controls the connection to the Master Google Sheet and the branding logo.</p>
      <div class="form-group"><label>Data Hub Master Sheet ID</label><input type="text" id="data-hub-id"></div>
      <div class="form-group"><label>Logo Google Drive File ID</label><input type="text" id="logo-file-id"></div>
      <button class="button" onclick="handleSaveSettings('adminSettings')">Save Admin Settings</button>
      <div id="adminSettings-status" class="status-message"></div>
      
      <hr class="divider">
      
      <h3>User Access Control</h3>
      <p class="setting-description">Define which roles (Admin, Lead, Staff) can access specific pages.</p>
      <div id="permissions-matrix-table" class="results-container"><p>Loading permission data...</p></div>
      <button class="button" onclick="handleSavePermissions()">Save Permissions</button>
      <div id="permissions-status" class="status-message"></div>
  </div>

  <!-- 2. STAFF MANAGEMENT -->
  <div id="tab-set-staff" class="tab-page">
      <h3>Manage Staff List</h3>
      <p class="setting-description">Add new employees or change their roles. This list is used across all modules.</p>
      <div style="background: #f0f0f0; padding: 15px; border-radius: 5px; margin-bottom: 20px;">
          <h4>âž• Add New Staff Member</h4>
          <div class="form-group inline-group" style="align-items: flex-end;">
              <div style="flex-grow: 1; min-width: 150px;"><label>Full Name</label><input type="text" id="new-staff-name" placeholder="John Smith"></div>
              <div style="flex-grow: 1; min-width: 150px;"><label>Staff ID (Email)</label><input type="text" id="new-staff-id" placeholder="jsmith@uni.edu"></div>
              <div style="width: 150px;"><label>Primary Role</label><select id="new-staff-role"><option value="Staff">Staff</option><option value="Lead">Lead</option><option value="Admin">Admin</option></select></div>
              <button class="button" id="add-staff-btn" onclick="handleAddStaff()">Add Staff</button>
          </div>
          <div id="add-staff-status" class="status-message"></div>
      </div>
      <hr class="divider">
      <div id="role-assignment-buttons">
          <button class="button" onclick="handleSaveRoleAssignments()">Save Role Changes</button>
          <div id="role-assignment-status" class="status-message"></div>
      </div>
      <div id="role-assignment-list" class="results-container"><p>Loading staff data...</p></div>
  </div>

  <!-- 3. SCHEDULING CONFIG -->
  <div id="tab-set-scheduling" class="tab-page">
      <h3>Course Data Connection (MST)</h3>
      <p class="setting-description">Connect to an external spreadsheet to import the Course Schedule. Leave blank to use local data only.</p>
      <div class="form-group"><label>External Sheet ID</label><input type="text" id="course-sheet-id" placeholder="Enter Google Sheet ID here"></div>
      <div class="form-group"><label>Tab Name</label><input type="text" id="course-tab-name" placeholder="e.g. Master_Schedule"></div>
      <button class="button" onclick="handleSaveSettings('courseImportSettings')">Save Connection</button>
      <div id="courseImportSettings-status" class="status-message"></div>
      
      <hr class="divider">

      <h3>Tech Hub Shift Configuration</h3>
      <p class="setting-description">Define the shift slots available in the Tech Hub Roster.</p>
      
      <div style="background: #f9f9f9; padding: 15px; border: 1px solid #eee; border-radius: 5px; margin-bottom: 20px;">
        <div class="form-group">
          <label>Description</label>
          <input type="text" id="shift-add-desc" placeholder="e.g. Morning Shift">
        </div>
        
        <div class="form-group">
          <label>Select Days (Bulk Add)</label>
          <div style="display: flex; gap: 10px; flex-wrap: wrap;">
              <label><input type="checkbox" class="shift-day-check" value="Monday"> Mon</label>
              <label><input type="checkbox" class="shift-day-check" value="Tuesday"> Tue</label>
              <label><input type="checkbox" class="shift-day-check" value="Wednesday"> Wed</label>
              <label><input type="checkbox" class="shift-day-check" value="Thursday"> Thu</label>
              <label><input type="checkbox" class="shift-day-check" value="Friday"> Fri</label>
              <label><input type="checkbox" class="shift-day-check" value="Saturday"> Sat</label>
              <label><input type="checkbox" class="shift-day-check" value="Sunday"> Sun</label>
          </div>
        </div>

        <div class="form-group inline-group">
          <div style="width: 120px;">
              <label>Start Time</label>
              <input type="time" id="shift-add-start" value="09:00">
          </div>
          <div style="width: 120px;">
              <label>End Time</label>
              <input type="time" id="shift-add-end" value="11:00">
          </div>
          
          <div style="display: flex; align-items: center; margin-bottom: 10px;">
              <label style="margin-right: 5px;">Zoom?</label>
              <input type="checkbox" id="shift-add-zoom" style="width: auto;">
          </div>

          <button class="button" id="shift-add-btn" onclick="handleAddShift()" style="margin-top: 24px;">Add Shifts</button>
        </div>
      </div>

      <div style="margin-bottom: 10px;">
        <button class="button danger" onclick="handleBulkDeleteShifts()">Delete Selected Shifts</button>
      </div>

      <div id="manage-shifts-list" class="results-container"><p>Loading shifts...</p></div>
    
      <hr class="divider">
      <div class="form-group">
         <label>Master Tech Hub Zoom URL</label>
         <input type="text" id="tech-hub-zoom-url">
         <button class="button secondary" style="margin-top:5px;" onclick="handleSaveSettings('schedulingSettings')">Save Zoom URL</button>
      </div>
      <button class="button danger" onclick="handleClearAllShifts()">Clear All Shifts</button>
  </div>

  <!-- 4. PROCTORING CONFIG -->
  <div id="tab-set-proctoring" class="tab-page">
      <h3>Nursing Exam Settings</h3>
      <p class="setting-description">Configure the source data and output folder for Nursing Exam Documents.</p>
      <div class="form-group"><label>Nursing Sheet ID</label><input type="text" id="nursing-sheet-id"></div>
      <div class="form-group"><label>Target Folder ID</label><input type="text" id="nursing-folder-id"></div>
      
      <!-- Header Alias Section -->
      <div class="setting-section" style="margin-top:20px;">
        <h4>Header Aliases</h4>
        <p class="setting-description">Define possible column names from the source sheet. The script will search for these (top to bottom) to find the correct data.</p>
        <div id="nursing-header-aliases-container"></div>
      </div>

      <button class="button" onclick="handleSaveSettings('nursingExamSettings')">Save Nursing Settings</button>
      <div id="nursingExamSettings-status" class="status-message"></div>

      <hr class="divider">

      <h3>MLT Exam Settings</h3>
      <p class="setting-description">Configure the source data and output folder for MLT Exam Documents.</p>
      <div class="form-group"><label>Source Sheet ID</label><input type="text" id="mlt-sheet-id"></div>
      <div class="form-group"><label>Target Folder ID</label><input type="text" id="mlt-folder-id"></div>
      
      <div style="display:flex; gap:20px; margin-top:15px;">
          <div style="flex:1;">
              <label>Column Keywords (JSON)</label>
              <textarea id="mlt-config-json" style="height:150px; font-family:monospace;"></textarea>
          </div>
          <div style="flex:1;">
              <label>General Notes for Docs</label>
              <textarea id="mlt-custom-notes" style="height:150px;"></textarea>
          </div>
      </div>
      <button class="button" onclick="mlt_handleSaveSettings()">Save MLT Settings</button>
      <div id="mltSettings-status" class="status-message"></div>

      <hr class="divider">

      <h3>Exam Booking Settings</h3>
      <p class="setting-description">Global settings for exam calendar integration.</p>
      <div class="form-group"><label>Exam Calendar ID</label><input type="text" id="exam-calendar-id"></div>
      <div class="form-group"><label>Proctor Capability Tag</label><input type="text" id="proctor-capability"></div>
      <button class="button" onclick="handleSaveSettings('examSettings')">Save Exam Settings</button>
      <div id="examSettings-status" class="status-message"></div>
  </div>

  <!-- 5. REPORTING & DATA -->
  <div id="tab-set-reporting" class="tab-page">
      <h3>Analytics Dashboard</h3>
      <p class="setting-description">Link to external Looker Studio dashboards.</p>
      <div class="form-group"><label>Looker Studio Dashboard URL</label><input type="text" id="reporting-url-input"></div>
      <button class="button" onclick="handleSaveSettings('reportingSettings')">Save URL</button>
      <div id="reportingSettings-status" class="status-message"></div>
      
      <hr class="divider">
      
      <h3>Calendar Connection</h3>
      <p class="setting-description">Configure the default calendar for MST Sync and Template settings.</p>
      <div class="form-group">
          <label>Method 1: Select from List</label>
          <select id="setting-target-calendar" onchange="document.getElementById('setting-manual-calendar-id').value = this.value"><option value="" disabled selected>Loading...</option></select>
      </div>
      <div class="form-group">
          <label>Method 2: Manual Calendar ID</label>
          <input type="text" id="setting-manual-calendar-id">
      </div>
      <div class="form-group">
          <label>Source Data Tab</label>
          <select id="setting-source-tab" onchange="loadTabHeaders(this.value)"><option value="" disabled selected>Loading Tabs...</option></select>
      </div>
      <div style="background: #f9f9f9; padding: 15px; border: 1px solid #eee; border-radius: 5px;">
          <h4>Template Builder</h4>
          <div class="form-group inline-group">
              <input type="text" id="template-name-input" placeholder="Template Name" style="width: 40%;">
              <input type="text" id="template-pattern-input" placeholder="{{Course}} - {{Faculty}}" style="flex-grow: 1;">
              <button class="button" onclick="handleAddTemplate()">Add</button>
          </div>
          <div id="available-headers-list" style="display: flex; flex-wrap: wrap; gap: 5px; margin-bottom: 15px;"></div>
          <div id="saved-templates-list"></div>
      </div>
      <button class="button" onclick="saveCalendarSettings()" style="margin-top: 15px;">Save Calendar Settings</button>
      <div id="calendarSettings-status" class="status-message"></div>
  </div>

</div>